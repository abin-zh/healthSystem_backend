<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cykj.mapper.MedicalItemCheckResultsMapper">
  <resultMap id="BaseResultMap" type="com.cykj.model.pojo.MedicalItemCheckResults">
    <!--@mbg.generated-->
    <!--@Table medical_item_check_results-->
    <id column="icr_id" jdbcType="INTEGER" property="icrId" />
    <result column="icr_item_id" jdbcType="INTEGER" property="icrItemId" />
    <result column="icr_result" jdbcType="VARCHAR" property="icrResult" />
    <result column="icr_order_id" jdbcType="INTEGER" property="icrOrderId" />
    <result column="icr_staff_id" jdbcType="INTEGER" property="icrStaffId" />
    <result column="icr_time" jdbcType="TIMESTAMP" property="icrTime" />
    <result column="icr_project_summary_id" jdbcType="INTEGER" property="icrProjectSummaryId" />
    <result column="icr_status" jdbcType="INTEGER" property="icrStatus" />
    <result column="icr_summary" jdbcType="VARCHAR" property="icrSummary" />
    <association property="item" javaType="com.cykj.model.pojo.MedicalItem"
                 resultMap="com.cykj.mapper.MedicalItemMapper.BaseResultMap" />
    <association property="staff" javaType="com.cykj.model.pojo.Staff"
                 resultMap="com.cykj.mapper.StaffMapper.BaseResultMap" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--@mbg.generated-->
    icr_id, icr_item_id, icr_result, icr_order_id, icr_staff_id, icr_time, icr_project_summary_id,
    icr_status, icr_summary
  </sql>

  <insert id="addOneResult">
    insert into medical_item_check_results(icr_order_id, icr_item_id, icr_project_summary_id) value (#{icrOrderId,jdbcType=INTEGER}, #{icrItemId,jdbcType=INTEGER}, #{icrProjectSummaryId,jdbcType=INTEGER})
  </insert>

<!--auto generated by MybatisCodeHelper on 2024-08-19-->
  <select id="findAllByIcrProjectSummaryId" resultMap="BaseResultMap">
      select
      <include refid="Base_Column_List"/>,
      <include refid="com.cykj.mapper.MedicalItemMapper.Base_Column_List" />,
      staff_id, staff_name
      from medical_item_check_results
      join healthsystem.medical_item mi on mi.item_id = medical_item_check_results.icr_item_id
      left join healthsystem.staff s on s.staff_id = medical_item_check_results.icr_staff_id
      where icr_project_summary_id = #{icrProjectSummaryId,jdbcType=INTEGER}
  </select>

<!--auto generated by MybatisCodeHelper on 2024-08-20-->
  <update id="updateByIcrId">
        update medical_item_check_results
        <set>
            <if test="updated.icrResult != null">
                icr_result = #{updated.icrResult,jdbcType=VARCHAR},
            </if>
            <if test="updated.icrStaffId != null">
                icr_staff_id = #{updated.icrStaffId,jdbcType=INTEGER},
            </if>
            <if test="updated.icrStatus != null">
                icr_status = #{updated.icrStatus,jdbcType=INTEGER},
            </if>
            <if test="updated.icrSummary != null">
                icr_summary = #{updated.icrSummary,jdbcType=VARCHAR},
            </if>
        </set>
        where icr_id=#{icrId,jdbcType=INTEGER}
    </update>
</mapper>